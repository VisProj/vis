<!DOCTYPE html>
<html>
<head>
<meta charset="windows-1255">
<title>Insert title here</title>
</head>
<body>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src= "https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0-beta.2/angular.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="d3.parcoords.js"></script>
<link rel="stylesheet" type="text/css" href="d3.parcoords.css">
<div id="example" class="parcoords" style="width:360px;height:150px"></div>

<div id="data-div">1232 <br/>
<p id="datap"></p>

<p id="p-id">id : </p>
<p id="demo">44</p>
</div>
<div id="example2" class="parcoords" style="width:360px;height:150px"></div>
<div id="example-zscore"></div>
<div id="example1"></div>
<script>
var data = [
  [0,-0,0,0,0,3,6 ],
  [1,-1,1,2,1,6 ,8],
  [2,-2,4,4,0.5,2,8],
  [3,-3,9,6,0.33,4,8],
  [4,-4,16,8,0.25,9,1]
];

var pc = d3.parcoords()("#example")
  .data(data)
  .render()
  .createAxes();
</script>


<script type="text/javascript">


//linear color scale
var blue_to_brown = d3.scale.linear()
  .domain([9, 50])
  .range(["steelblue", "brown"])
  .interpolate(d3.interpolateLab);

// interact with this variable from a javascript console
var pc1;

// load csv file and create the chart
d3.csv('data/2.5_month.csv', function(data) {

//	var data2 = JSON.parse(data);
	console.log(JSON.stringify(data));
	console.log(JSON.parse(JSON.stringify(data)));
	alert("here");
	pc1 = d3.parcoords()("#example1")
    .data(data)
    .hideAxis(["name"])
    .composite("darken")
    .color(function(d) { return blue_to_brown(d['economy (mpg)']); })  // quantitative color scale
    .alpha(0.35)
    .render()
    .brushMode("1D-axes")  // enable brushing
    .interactive()  // command line mode

  var explore_count = 0;
  var exploring = {};
  var explore_start = false;
  pc1.svg
    .selectAll(".dimension")
    .style("cursor", "pointer")
    .on("click", function(d) {
      exploring[d] = d in exploring ? false : true;
      event.preventDefault();
      if (exploring[d]) d3.timer(explore(d,explore_count));
    });

  function explore(dimension,count) {
    if (!explore_start) {
      explore_start = true;
      d3.timer(pc1.brush);
    }
    var speed = (Math.round(Math.random()) ? 1 : -1) * (Math.random()+0.5);
    return function(t) {
      if (!exploring[dimension]) return true;
      var domain = pc1.yscale[dimension].domain();
      var width = (domain[1] - domain[0])/4;

      var center = width*1.5*(1+Math.sin(speed*t/1200)) + domain[0];

      pc1.yscale[dimension].brush.extent([
        d3.max([center-width*0.01, domain[0]-width/400]),
        d3.min([center+width*1.01, domain[1]+width/100])
      ])(pc1.g()
          .filter(function(d) {
            return d == dimension;
          })
      );
    };
  };

});
</script>

<script >




function dataParse()
{


	$.ajax({ 
	    type: 'GET', 
	    url: 'http://localhost:8080/ParallelVisualization/data/LHData.json',  
	    dataType: 'json',
	    error : function() {

            alert("Error Occured in CoursesList function");
        },
	    success: function (data) 
	    { 
	    	

	    	var i ;
			var singleQuake;
			var EarthQuakes=[];
			var id;
	        var mag;  
	        var time;
	        var magType ;
	        var alertLevel;
	        var sig ;
	        var Equake ;
	        var properties;
	 		var arrays= new Array(data.features.length);
	 		document.getElementById("p-id").innerHTML +=data.features.length;
			for(i=0;i<data.features.length;i++)
   			{
		    	 Equake =  data.features[i];
		    	 properties = Equake.properties;
		    
				 id=Equake.id;
		         mag= properties.mag; // [-1.0, 10.0]
		         time =TimeConverter(properties.time);
		         magType = properties.magType;
		         //“Md”, “Ml”, “Ms”, “Mw”, “Me”, “Mi”, “Mb”, “MLg”
		         
		         alertLevel = properties.alert;
		         if(alertLevel == "null")
		        	 {
		        	 aalertLevel= 0;
		        	 }
		         sig = properties.sig;// a number from 0 to 100 that shows how significant the event was
	
		       	arrays[i]=[i,2,2,3,3];//[id,mag,magType,alertLevel,sig];//,time];
		   // singleQuake = {id:id,mag:mag,magType:magType,alertLevel:alertLevel,sig:sig,time:time};
				document.getElementById("demo").innerHTML+= JSON.stringify(properties);
		
		//       EarthQuakes.push(arr);   			
  			 }
			var data2 = [
			            [0,-0,0,0,0,3,6 ],
			            [1,-1,1,2,1,6 ,8],
			            [2,-2,4,4,0.5,2,8],
			            [3,-3,9,6,0.33,4,8],
			            [4,-4,16,8,0.25,9,1]
			          ];

			          var pc2 = d3.parcoords()("#example2")
			            .data(arrays)
			            .render()
			            .createAxes();
			   }
	});
	
}




/**
 *  status
 	Data Type
 	String
 	Typical Values
 	“automatic”, “reviewed”, “deleted”
 	
 	
 	
 	magNst
 	Data Type
 	Integer
 	Description
 	The total number of seismic stations used to calculate the magnitude for this earthquake.
 	
 	
 	magError
 	Data Type
 	Decimal
 	Typical Values
 	[0, 100]
 	Description
 	Uncertainty of reported magnitude of the event.
 	
 	
 	horizontalError
 	Data Type
 	Decimal
 	Typical Values
 	[0, 100]
 	Description
 	Uncertainty of reported location of the event in kilometers.
 	
 	gap
 	Data Type
 	Decimal
 	Typical Values
 	[0.0, 180.0]
 	Description
 	The largest azimuthal gap between azimuthally adjacent stations (in degrees). In general, the smaller this number, the more reliable is the calculated horizontal position of the earthquake
 	
 	dmin
 	Data Type
 	Decimal
 	Typical Values
 	[0.4, 7.1]
 	Description
 	Horizontal distance from the epicenter to the nearest station (in degrees). 1 degree is approximately 111.2 kilometers. In general, the smaller this number, the more reliable is the calculated depth of the earthquake.
 	
 	depthError
 	Data Type
 	Decimal
 	Typical Values
 	[0, 100]
 	Description
 	Uncertainty of reported depth of the event in kilometers.
 	
 	depth
 	Data Type
 	Decimal
 	Typical Values
 	[0, 1000]
 	Description
 	Depth of the event in kilometers.
 	
 	
 	
 *//
function TimeConverter(Milliseconds)
{
		//Time when the event occurred. Times are reported in milliseconds 
		//since the epoch ( 1970-01-01T00:00:00.000Z), and do not include leap seconds. 
		//In certain output formats, the date is formatted for readability.
		var date =  new Date();//1970-01-01T00:00:00.000Z);
		date += parseInt(Milliseconds);
		return new Date();// new Date(date)
	
}

dataParse();
</script>
</body>
</html>